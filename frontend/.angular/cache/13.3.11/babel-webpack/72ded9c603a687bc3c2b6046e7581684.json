{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/admin.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\n\nfunction AdminUsersComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵelement(1, \"div\", 6);\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \"Loading users...\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction AdminUsersComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function AdminUsersComponent_div_4_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.loadUsers();\n    });\n    i0.ɵɵtext(4, \"Retry\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.errorMessage);\n  }\n}\n\nfunction AdminUsersComponent_div_5_tr_21_option_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const option_r10 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r10.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", option_r10.label, \" \");\n  }\n}\n\nfunction AdminUsersComponent_div_5_tr_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\")(10, \"select\", 16);\n    i0.ɵɵlistener(\"change\", function AdminUsersComponent_div_5_tr_21_Template_select_change_10_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r12);\n      const user_r8 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return ctx_r11.onRoleChange($event, user_r8.id);\n    });\n    i0.ɵɵtemplate(11, AdminUsersComponent_div_5_tr_21_option_11_Template, 2, 2, \"option\", 17);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"td\")(13, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function AdminUsersComponent_div_5_tr_21_Template_button_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r12);\n      const user_r8 = restoredCtx.$implicit;\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return ctx_r13.viewUserDetails(user_r8);\n    });\n    i0.ɵɵtext(14, \"View Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function AdminUsersComponent_div_5_tr_21_Template_button_click_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r12);\n      const user_r8 = restoredCtx.$implicit;\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return ctx_r14.editUserFromTable(user_r8);\n    });\n    i0.ɵɵtext(16, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function AdminUsersComponent_div_5_tr_21_Template_button_click_17_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r12);\n      const user_r8 = restoredCtx.$implicit;\n      const ctx_r15 = i0.ɵɵnextContext(2);\n      return ctx_r15.deleteUser(user_r8.id);\n    });\n    i0.ɵɵtext(18, \"Delete\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const user_r8 = ctx.$implicit;\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r8.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r8.username);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r8.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", user_r8.firstName, \" \", user_r8.lastName, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", user_r8.role);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.roleOptions);\n  }\n}\n\nfunction AdminUsersComponent_div_5_tr_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 22);\n    i0.ɵɵtext(2, \"No users found\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction AdminUsersComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 9)(1, \"div\", 10)(2, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function AdminUsersComponent_div_5_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return ctx_r16.loadUsers();\n    });\n    i0.ɵɵtext(3, \"Refresh Users\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 12)(5, \"table\", 13)(6, \"thead\")(7, \"tr\")(8, \"th\");\n    i0.ɵɵtext(9, \"ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Username\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\");\n    i0.ɵɵtext(15, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"th\");\n    i0.ɵɵtext(17, \"Role\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"th\");\n    i0.ɵɵtext(19, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(20, \"tbody\");\n    i0.ɵɵtemplate(21, AdminUsersComponent_div_5_tr_21_Template, 19, 7, \"tr\", 14);\n    i0.ɵɵtemplate(22, AdminUsersComponent_div_5_tr_22_Template, 3, 0, \"tr\", 15);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(21);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.users);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.users.length === 0);\n  }\n}\n\nfunction AdminUsersComponent_div_6_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 36);\n    i0.ɵɵtext(1, \" User details updated successfully! \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AdminUsersComponent_div_6_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r19 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r19.updateErrorMessage, \" \");\n  }\n}\n\nfunction AdminUsersComponent_div_6_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 38)(1, \"div\", 39)(2, \"span\", 40);\n    i0.ɵɵtext(3, \"ID:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 41);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 39)(7, \"span\", 40);\n    i0.ɵɵtext(8, \"Username:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"span\", 41);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 39)(12, \"span\", 40);\n    i0.ɵɵtext(13, \"Email:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"span\", 41);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 39)(17, \"span\", 40);\n    i0.ɵɵtext(18, \"First Name:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"span\", 41);\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"div\", 39)(22, \"span\", 40);\n    i0.ɵɵtext(23, \"Last Name:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"span\", 41);\n    i0.ɵɵtext(25);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"div\", 39)(27, \"span\", 40);\n    i0.ɵɵtext(28, \"Address:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"span\", 41);\n    i0.ɵɵtext(30);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(31, \"div\", 39)(32, \"span\", 40);\n    i0.ɵɵtext(33, \"Created:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"span\", 41);\n    i0.ɵɵtext(35);\n    i0.ɵɵpipe(36, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(37, \"div\", 39)(38, \"span\", 40);\n    i0.ɵɵtext(39, \"Role:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(40, \"span\", 42);\n    i0.ɵɵtext(41);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(42, \"div\", 43)(43, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function AdminUsersComponent_div_6_div_10_Template_button_click_43_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r23 = i0.ɵɵnextContext(2);\n      return ctx_r23.editUserDetails();\n    });\n    i0.ɵɵtext(44, \"Edit Details\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r20 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r20.selectedUser.id);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r20.selectedUser.username);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r20.selectedUser.email);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r20.selectedUser.firstName || \"Not provided\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r20.selectedUser.lastName || \"Not provided\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r20.selectedUser.address || \"Not provided\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(36, 10, ctx_r20.selectedUser.createdAt));\n    i0.ɵɵadvance(5);\n    i0.ɵɵclassMap(ctx_r20.selectedUser.role.toLowerCase());\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r20.selectedUser.role, \" \");\n  }\n}\n\nfunction AdminUsersComponent_div_6_div_11_div_6_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Username is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AdminUsersComponent_div_6_div_11_div_6_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Username must be at least 4 characters.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AdminUsersComponent_div_6_div_11_div_6_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Username cannot exceed 50 characters.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AdminUsersComponent_div_6_div_11_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 59);\n    i0.ɵɵtemplate(1, AdminUsersComponent_div_6_div_11_div_6_div_1_Template, 2, 0, \"div\", 15);\n    i0.ɵɵtemplate(2, AdminUsersComponent_div_6_div_11_div_6_div_2_Template, 2, 0, \"div\", 15);\n    i0.ɵɵtemplate(3, AdminUsersComponent_div_6_div_11_div_6_div_3_Template, 2, 0, \"div\", 15);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r25 = i0.ɵɵnextContext(3);\n    let tmp_0_0;\n    let tmp_1_0;\n    let tmp_2_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_0_0 = ctx_r25.userForm.get(\"username\")) == null ? null : tmp_0_0.errors == null ? null : tmp_0_0.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r25.userForm.get(\"username\")) == null ? null : tmp_1_0.errors == null ? null : tmp_1_0.errors[\"minlength\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_2_0 = ctx_r25.userForm.get(\"username\")) == null ? null : tmp_2_0.errors == null ? null : tmp_2_0.errors[\"maxlength\"]);\n  }\n}\n\nfunction AdminUsersComponent_div_6_div_11_div_11_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"First name cannot exceed 50 characters.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AdminUsersComponent_div_6_div_11_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 59);\n    i0.ɵɵtemplate(1, AdminUsersComponent_div_6_div_11_div_11_div_1_Template, 2, 0, \"div\", 15);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r26 = i0.ɵɵnextContext(3);\n    let tmp_0_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_0_0 = ctx_r26.userForm.get(\"firstName\")) == null ? null : tmp_0_0.errors == null ? null : tmp_0_0.errors[\"maxlength\"]);\n  }\n}\n\nfunction AdminUsersComponent_div_6_div_11_div_16_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Last name cannot exceed 50 characters.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AdminUsersComponent_div_6_div_11_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 59);\n    i0.ɵɵtemplate(1, AdminUsersComponent_div_6_div_11_div_16_div_1_Template, 2, 0, \"div\", 15);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r27 = i0.ɵɵnextContext(3);\n    let tmp_0_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_0_0 = ctx_r27.userForm.get(\"lastName\")) == null ? null : tmp_0_0.errors == null ? null : tmp_0_0.errors[\"maxlength\"]);\n  }\n}\n\nfunction AdminUsersComponent_div_6_div_11_div_21_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Address cannot exceed 255 characters.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AdminUsersComponent_div_6_div_11_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 59);\n    i0.ɵɵtemplate(1, AdminUsersComponent_div_6_div_11_div_21_div_1_Template, 2, 0, \"div\", 15);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r28 = i0.ɵɵnextContext(3);\n    let tmp_0_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_0_0 = ctx_r28.userForm.get(\"address\")) == null ? null : tmp_0_0.errors == null ? null : tmp_0_0.errors[\"maxlength\"]);\n  }\n}\n\nfunction AdminUsersComponent_div_6_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r36 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 44)(1, \"form\", 45);\n    i0.ɵɵlistener(\"ngSubmit\", function AdminUsersComponent_div_6_div_11_Template_form_ngSubmit_1_listener() {\n      i0.ɵɵrestoreView(_r36);\n      const ctx_r35 = i0.ɵɵnextContext(2);\n      return ctx_r35.saveUserDetails();\n    });\n    i0.ɵɵelementStart(2, \"div\", 46)(3, \"label\", 47);\n    i0.ɵɵtext(4, \"Username\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"input\", 48);\n    i0.ɵɵtemplate(6, AdminUsersComponent_div_6_div_11_div_6_Template, 4, 3, \"div\", 49);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 46)(8, \"label\", 50);\n    i0.ɵɵtext(9, \"First Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(10, \"input\", 51);\n    i0.ɵɵtemplate(11, AdminUsersComponent_div_6_div_11_div_11_Template, 2, 1, \"div\", 49);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 46)(13, \"label\", 52);\n    i0.ɵɵtext(14, \"Last Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(15, \"input\", 53);\n    i0.ɵɵtemplate(16, AdminUsersComponent_div_6_div_11_div_16_Template, 2, 1, \"div\", 49);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 46)(18, \"label\", 54);\n    i0.ɵɵtext(19, \"Address\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(20, \"textarea\", 55);\n    i0.ɵɵtemplate(21, AdminUsersComponent_div_6_div_11_div_21_Template, 2, 1, \"div\", 49);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"div\", 56)(23, \"button\", 57);\n    i0.ɵɵtext(24, \"Save Changes\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"button\", 58);\n    i0.ɵɵlistener(\"click\", function AdminUsersComponent_div_6_div_11_Template_button_click_25_listener() {\n      i0.ɵɵrestoreView(_r36);\n      const ctx_r37 = i0.ɵɵnextContext(2);\n      return ctx_r37.cancelEdit();\n    });\n    i0.ɵɵtext(26, \"Cancel\");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r21 = i0.ɵɵnextContext(2);\n    let tmp_1_0;\n    let tmp_2_0;\n    let tmp_3_0;\n    let tmp_4_0;\n    let tmp_5_0;\n    let tmp_6_0;\n    let tmp_7_0;\n    let tmp_8_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r21.userForm);\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassProp(\"is-invalid\", ((tmp_1_0 = ctx_r21.userForm.get(\"username\")) == null ? null : tmp_1_0.invalid) && ((tmp_1_0 = ctx_r21.userForm.get(\"username\")) == null ? null : tmp_1_0.touched));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx_r21.userForm.get(\"username\")) == null ? null : tmp_2_0.invalid) && ((tmp_2_0 = ctx_r21.userForm.get(\"username\")) == null ? null : tmp_2_0.touched));\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassProp(\"is-invalid\", ((tmp_3_0 = ctx_r21.userForm.get(\"firstName\")) == null ? null : tmp_3_0.invalid) && ((tmp_3_0 = ctx_r21.userForm.get(\"firstName\")) == null ? null : tmp_3_0.touched));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_4_0 = ctx_r21.userForm.get(\"firstName\")) == null ? null : tmp_4_0.invalid) && ((tmp_4_0 = ctx_r21.userForm.get(\"firstName\")) == null ? null : tmp_4_0.touched));\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassProp(\"is-invalid\", ((tmp_5_0 = ctx_r21.userForm.get(\"lastName\")) == null ? null : tmp_5_0.invalid) && ((tmp_5_0 = ctx_r21.userForm.get(\"lastName\")) == null ? null : tmp_5_0.touched));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_6_0 = ctx_r21.userForm.get(\"lastName\")) == null ? null : tmp_6_0.invalid) && ((tmp_6_0 = ctx_r21.userForm.get(\"lastName\")) == null ? null : tmp_6_0.touched));\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassProp(\"is-invalid\", ((tmp_7_0 = ctx_r21.userForm.get(\"address\")) == null ? null : tmp_7_0.invalid) && ((tmp_7_0 = ctx_r21.userForm.get(\"address\")) == null ? null : tmp_7_0.touched));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ((tmp_8_0 = ctx_r21.userForm.get(\"address\")) == null ? null : tmp_8_0.invalid) && ((tmp_8_0 = ctx_r21.userForm.get(\"address\")) == null ? null : tmp_8_0.touched));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r21.userForm.invalid);\n  }\n}\n\nfunction AdminUsersComponent_div_6_option_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const option_r38 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r38.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", option_r38.label, \" \");\n  }\n}\n\nfunction AdminUsersComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r40 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"div\", 24)(2, \"div\", 25)(3, \"h3\");\n    i0.ɵɵtext(4, \"User Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function AdminUsersComponent_div_6_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r40);\n      const ctx_r39 = i0.ɵɵnextContext();\n      return ctx_r39.closeUserDetails();\n    });\n    i0.ɵɵtext(6, \"\\u00D7\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 27);\n    i0.ɵɵtemplate(8, AdminUsersComponent_div_6_div_8_Template, 2, 0, \"div\", 28);\n    i0.ɵɵtemplate(9, AdminUsersComponent_div_6_div_9_Template, 2, 1, \"div\", 29);\n    i0.ɵɵtemplate(10, AdminUsersComponent_div_6_div_10_Template, 45, 12, \"div\", 30);\n    i0.ɵɵtemplate(11, AdminUsersComponent_div_6_div_11_Template, 27, 14, \"div\", 31);\n    i0.ɵɵelementStart(12, \"div\", 32)(13, \"h4\");\n    i0.ɵɵtext(14, \"Update Role\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 33)(16, \"select\", 16);\n    i0.ɵɵlistener(\"change\", function AdminUsersComponent_div_6_Template_select_change_16_listener($event) {\n      i0.ɵɵrestoreView(_r40);\n      const ctx_r41 = i0.ɵɵnextContext();\n      return ctx_r41.onRoleChange($event, ctx_r41.selectedUser.id);\n    });\n    i0.ɵɵtemplate(17, AdminUsersComponent_div_6_option_17_Template, 2, 2, \"option\", 17);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(18, \"div\", 34)(19, \"h4\");\n    i0.ɵɵtext(20, \"Delete User\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"button\", 35);\n    i0.ɵɵlistener(\"click\", function AdminUsersComponent_div_6_Template_button_click_21_listener() {\n      i0.ɵɵrestoreView(_r40);\n      const ctx_r42 = i0.ɵɵnextContext();\n      return ctx_r42.deleteUser(ctx_r42.selectedUser.id);\n    });\n    i0.ɵɵtext(22, \"Delete User\");\n    i0.ɵɵelementEnd()()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.updateSuccess);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.updateError);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r3.editMode);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.editMode);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"value\", ctx_r3.selectedUser.role);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.roleOptions);\n  }\n}\n\nexport let AdminUsersComponent = /*#__PURE__*/(() => {\n  class AdminUsersComponent {\n    constructor(adminService, fb) {\n      this.adminService = adminService;\n      this.fb = fb;\n      this.users = [];\n      this.isLoading = true;\n      this.error = false;\n      this.errorMessage = '';\n      this.selectedUser = null;\n      this.editMode = false;\n      this.updateSuccess = false;\n      this.updateError = false;\n      this.updateErrorMessage = '';\n      this.roleOptions = [{\n        value: 'USER',\n        label: 'User'\n      }, {\n        value: 'ADMIN',\n        label: 'Admin'\n      }];\n      this.userForm = this.fb.group({\n        username: ['', [Validators.required, Validators.minLength(4), Validators.maxLength(50)]],\n        firstName: ['', [Validators.maxLength(50)]],\n        lastName: ['', [Validators.maxLength(50)]],\n        address: ['', [Validators.maxLength(255)]]\n      });\n    }\n\n    ngOnInit() {\n      this.loadUsers();\n    }\n\n    loadUsers() {\n      this.isLoading = true;\n      this.error = false;\n      this.adminService.getAllUsers().subscribe(data => {\n        this.users = data;\n        this.isLoading = false;\n      }, error => {\n        this.isLoading = false;\n        this.error = true;\n        this.errorMessage = 'Error loading users. Please try again.';\n        console.error('Error loading users:', error);\n      });\n    }\n\n    viewUserDetails(user) {\n      this.selectedUser = user;\n      this.editMode = false;\n      this.updateSuccess = false;\n      this.updateError = false;\n    }\n\n    closeUserDetails() {\n      this.selectedUser = null;\n      this.editMode = false;\n      this.updateSuccess = false;\n      this.updateError = false;\n    }\n\n    updateUserRole(userId, role) {\n      this.adminService.updateUserRole(userId, {\n        role\n      }).subscribe(data => {\n        // Update the user in the local array\n        const index = this.users.findIndex(user => user.id === userId);\n\n        if (index !== -1) {\n          this.users[index].role = role;\n        } // If we're viewing the details of this user, update that too\n\n\n        if (this.selectedUser && this.selectedUser.id === userId) {\n          this.selectedUser.role = role;\n        }\n      }, error => {\n        console.error('Error updating user role:', error);\n      });\n    }\n\n    onRoleChange(event, userId) {\n      const selectElement = event.target;\n\n      if (selectElement) {\n        this.updateUserRole(userId, selectElement.value);\n      }\n    }\n\n    deleteUser(userId) {\n      if (confirm('Are you sure you want to delete this user? This action cannot be undone.')) {\n        this.adminService.deleteUser(userId).subscribe(() => {\n          // Remove the user from the local array\n          this.users = this.users.filter(user => user.id !== userId); // If we're viewing the details of this user, close the modal\n\n          if (this.selectedUser && this.selectedUser.id === userId) {\n            this.selectedUser = null;\n          }\n        }, error => {\n          console.error('Error deleting user:', error);\n          alert('Could not delete user. Please try again.');\n        });\n      }\n    }\n\n    editUserFromTable(user) {\n      this.selectedUser = user;\n      this.editUserDetails();\n    }\n\n    editUserDetails() {\n      if (!this.selectedUser) return;\n      this.userForm.patchValue({\n        username: this.selectedUser.username,\n        firstName: this.selectedUser.firstName || '',\n        lastName: this.selectedUser.lastName || '',\n        address: this.selectedUser.address || ''\n      });\n      this.editMode = true;\n      this.updateSuccess = false;\n      this.updateError = false;\n    }\n\n    cancelEdit() {\n      this.editMode = false;\n    }\n\n    saveUserDetails() {\n      if (this.userForm.invalid) return;\n      const userData = {\n        username: this.userForm.value.username,\n        firstName: this.userForm.value.firstName,\n        lastName: this.userForm.value.lastName,\n        address: this.userForm.value.address\n      };\n      this.adminService.updateUserDetails(this.selectedUser.id, userData).subscribe(response => {\n        // Update the user in the local array\n        const index = this.users.findIndex(user => user.id === this.selectedUser.id);\n\n        if (index !== -1) {\n          this.users[index] = Object.assign(Object.assign({}, this.users[index]), userData);\n        } // Update the selected user details\n\n\n        this.selectedUser = Object.assign(Object.assign({}, this.selectedUser), userData);\n        this.editMode = false;\n        this.updateSuccess = true;\n        this.updateError = false; // Hide success message after 3 seconds\n\n        setTimeout(() => {\n          this.updateSuccess = false;\n        }, 3000);\n      }, error => {\n        var _a;\n\n        console.error('Error updating user details:', error);\n        this.updateError = true;\n        this.updateErrorMessage = ((_a = error.error) === null || _a === void 0 ? void 0 : _a.message) || 'Error updating user details. Please try again.';\n      });\n    }\n\n  }\n\n  AdminUsersComponent.ɵfac = function AdminUsersComponent_Factory(t) {\n    return new (t || AdminUsersComponent)(i0.ɵɵdirectiveInject(i1.AdminService), i0.ɵɵdirectiveInject(i2.FormBuilder));\n  };\n\n  AdminUsersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AdminUsersComponent,\n    selectors: [[\"app-admin-users\"]],\n    decls: 7,\n    vars: 4,\n    consts: [[1, \"admin-users\"], [\"class\", \"loading-container\", 4, \"ngIf\"], [\"class\", \"error-container\", 4, \"ngIf\"], [\"class\", \"users-container\", 4, \"ngIf\"], [\"class\", \"modal\", 4, \"ngIf\"], [1, \"loading-container\"], [1, \"spinner\"], [1, \"error-container\"], [1, \"btn-primary\", 3, \"click\"], [1, \"users-container\"], [1, \"table-actions\"], [1, \"refresh-btn\", 3, \"click\"], [1, \"table-responsive\"], [1, \"data-table\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [1, \"role-select\", 3, \"value\", \"change\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"view-btn\", 3, \"click\"], [1, \"edit-btn\", 3, \"click\"], [1, \"delete-btn\", 3, \"click\"], [3, \"value\"], [\"colspan\", \"6\", 1, \"no-data\"], [1, \"modal\"], [1, \"modal-content\"], [1, \"modal-header\"], [1, \"close-btn\", 3, \"click\"], [1, \"modal-body\"], [\"class\", \"success-message\", 4, \"ngIf\"], [\"class\", \"error-message\", 4, \"ngIf\"], [\"class\", \"user-details\", 4, \"ngIf\"], [\"class\", \"user-edit-form\", 4, \"ngIf\"], [1, \"role-update\"], [1, \"role-controls\"], [1, \"delete-section\"], [1, \"delete-btn\", \"full-width\", 3, \"click\"], [1, \"success-message\"], [1, \"error-message\"], [1, \"user-details\"], [1, \"detail-row\"], [1, \"detail-label\"], [1, \"detail-value\"], [1, \"detail-value\", \"role-badge\"], [1, \"action-buttons\"], [1, \"user-edit-form\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\"], [\"for\", \"username\"], [\"type\", \"text\", \"id\", \"username\", \"formControlName\", \"username\", 1, \"form-control\"], [\"class\", \"error-feedback\", 4, \"ngIf\"], [\"for\", \"firstName\"], [\"type\", \"text\", \"id\", \"firstName\", \"formControlName\", \"firstName\", 1, \"form-control\"], [\"for\", \"lastName\"], [\"type\", \"text\", \"id\", \"lastName\", \"formControlName\", \"lastName\", 1, \"form-control\"], [\"for\", \"address\"], [\"id\", \"address\", \"formControlName\", \"address\", 1, \"form-control\"], [1, \"form-actions\"], [\"type\", \"submit\", 1, \"save-btn\", 3, \"disabled\"], [\"type\", \"button\", 1, \"cancel-btn\", 3, \"click\"], [1, \"error-feedback\"]],\n    template: function AdminUsersComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n        i0.ɵɵtext(2, \"User Management\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, AdminUsersComponent_div_3_Template, 4, 0, \"div\", 1);\n        i0.ɵɵtemplate(4, AdminUsersComponent_div_4_Template, 5, 1, \"div\", 2);\n        i0.ɵɵtemplate(5, AdminUsersComponent_div_5_Template, 23, 2, \"div\", 3);\n        i0.ɵɵtemplate(6, AdminUsersComponent_div_6_Template, 23, 6, \"div\", 4);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.error);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && !ctx.error);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.selectedUser);\n      }\n    },\n    directives: [i3.NgIf, i3.NgForOf, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.DefaultValueAccessor, i2.NgControlStatus, i2.FormControlName],\n    pipes: [i3.DatePipe],\n    styles: [\".admin-users[_ngcontent-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{margin-bottom:20px;color:#333;font-weight:600}.loading-container[_ngcontent-%COMP%]{text-align:center;padding:40px}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #3498db;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 15px}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-container[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;padding:15px;border-radius:4px;margin-bottom:20px}.table-actions[_ngcontent-%COMP%]{margin-bottom:15px;display:flex;justify-content:flex-end}.refresh-btn[_ngcontent-%COMP%]{background-color:#f8f9fa;border:1px solid #dee2e6;color:#495057;padding:8px 16px;border-radius:4px;cursor:pointer;font-size:14px;transition:all .2s}.refresh-btn[_ngcontent-%COMP%]:hover{background-color:#e9ecef}.table-responsive[_ngcontent-%COMP%]{overflow-x:auto}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px;font-size:14px}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:12px 15px;text-align:left;font-weight:600;color:#495057;border-bottom:2px solid #dee2e6}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 15px;border-bottom:1px solid #e9ecef;vertical-align:middle}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.no-data[_ngcontent-%COMP%]{text-align:center;color:#6c757d;padding:30px}.role-select[_ngcontent-%COMP%]{padding:6px 10px;border:1px solid #ced4da;border-radius:4px;background-color:#fff;width:100%;max-width:120px;font-size:14px}.view-btn[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:5px 10px;border-radius:4px;cursor:pointer;transition:background-color .3s;margin-right:5px}.view-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}.delete-btn[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:5px 10px;border-radius:4px;cursor:pointer;transition:background-color .3s}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#c82333}.delete-btn.full-width[_ngcontent-%COMP%]{display:block;width:100%;padding:8px;margin-top:10px}.warning-text[_ngcontent-%COMP%]{color:#dc3545;font-size:14px;margin-bottom:10px;font-weight:700}.delete-section[_ngcontent-%COMP%]{margin-top:20px;padding-top:20px;border-top:1px solid #eee}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background-color:#fff;width:90%;max-width:600px;border-radius:8px;box-shadow:0 4px 20px #0000001a;max-height:90vh;overflow-y:auto}.modal-header[_ngcontent-%COMP%]{padding:15px 20px;border-bottom:1px solid #dee2e6;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#212529;font-weight:600}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#6c757d}.close-btn[_ngcontent-%COMP%]:hover{color:#343a40}.modal-body[_ngcontent-%COMP%]{padding:20px}.user-details[_ngcontent-%COMP%]{margin-bottom:25px;background-color:#f8f9fa;padding:15px;border-radius:4px}.detail-row[_ngcontent-%COMP%]{display:flex;margin-bottom:10px}.detail-label[_ngcontent-%COMP%]{flex:0 0 120px;font-weight:600;color:#495057}.detail-value[_ngcontent-%COMP%]{flex:1}.role-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase}.role-badge.admin[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.role-badge.user[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.role-update[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:15px;border-radius:4px}.role-update[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:15px;color:#495057;font-weight:600}.role-controls[_ngcontent-%COMP%]{display:flex;align-items:center}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:10px 15px;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .2s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0069d9}.action-buttons[_ngcontent-%COMP%]{margin-top:15px;display:flex;justify-content:flex-end}.edit-btn[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff;border:none;padding:5px 10px;border-radius:4px;cursor:pointer;transition:background-color .3s;margin-right:5px}.edit-btn[_ngcontent-%COMP%]:hover{background-color:#138496}.user-edit-form[_ngcontent-%COMP%]{margin-bottom:25px;background-color:#f8f9fa;padding:15px;border-radius:4px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:600;color:#495057}.form-control[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #ced4da;border-radius:4px;font-size:14px}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.error-feedback[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:5px}textarea.form-control[_ngcontent-%COMP%]{min-height:100px;resize:vertical}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}.save-btn[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;transition:background-color .3s}.save-btn[_ngcontent-%COMP%]:hover{background-color:#218838}.save-btn[_ngcontent-%COMP%]:disabled{background-color:#6c757d;cursor:not-allowed}.cancel-btn[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;transition:background-color .3s}.cancel-btn[_ngcontent-%COMP%]:hover{background-color:#5a6268}.success-message[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;padding:10px 15px;border-radius:4px;margin-bottom:15px}.error-message[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;padding:10px 15px;border-radius:4px;margin-bottom:15px}\"]\n  });\n  return AdminUsersComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}