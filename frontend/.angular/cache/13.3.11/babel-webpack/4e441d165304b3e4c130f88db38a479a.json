{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/cart.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\n\nfunction CartComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 7);\n    i0.ɵɵelement(2, \"div\", 8);\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4, \"Loading your cart...\");\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nfunction CartComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 9)(1, \"p\");\n    i0.ɵɵtext(2, \"There was an error loading your cart. Please try again later.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_4_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.loadCart();\n    });\n    i0.ɵɵtext(4, \"Try Again\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction CartComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"p\");\n    i0.ɵɵtext(2, \"Your cart is empty.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"a\", 12);\n    i0.ɵɵtext(4, \"Browse Books\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction CartComponent_div_6_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"div\", 23);\n    i0.ɵɵelement(2, \"img\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 25)(4, \"h3\", 26);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 27);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\", 28);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\", 29)(11, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_6_div_2_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const item_r7 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return ctx_r8.decrementQuantity(item_r7);\n    });\n    i0.ɵɵtext(12, \"-\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"input\", 31);\n    i0.ɵɵlistener(\"change\", function CartComponent_div_6_div_2_Template_input_change_13_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const item_r7 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return ctx_r10.updateQuantity(item_r7, $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_6_div_2_Template_button_click_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const item_r7 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return ctx_r11.incrementQuantity(item_r7);\n    });\n    i0.ɵɵtext(15, \"+\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 33)(17, \"p\");\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"div\", 34)(20, \"button\", 35);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_6_div_2_Template_button_click_20_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const item_r7 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return ctx_r12.removeItem(item_r7.id);\n    });\n    i0.ɵɵelementStart(21, \"span\");\n    i0.ɵɵtext(22, \"Remove\");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const item_r7 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", item_r7.imageUrl || \"assets/images/book-placeholder.jpg\", i0.ɵɵsanitizeUrl)(\"alt\", item_r7.title);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r7.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"by \", item_r7.author, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\u20AC\", item_r7.price, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", item_r7.quantity <= 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", item_r7.quantity);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\\u20AC\", item_r7.subtotal, \"\");\n  }\n}\n\nfunction CartComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"div\", 14);\n    i0.ɵɵtemplate(2, CartComponent_div_6_div_2_Template, 23, 8, \"div\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 16)(4, \"h2\");\n    i0.ɵɵtext(5, \"Order Summary\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 17)(7, \"span\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"span\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 18)(12, \"span\");\n    i0.ɵɵtext(13, \"Total:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"span\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 19)(17, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_6_Template_button_click_17_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.proceedToCheckout();\n    });\n    i0.ɵɵtext(18, \" Proceed to Checkout \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_6_Template_button_click_19_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.clearCart();\n    });\n    i0.ɵɵtext(20, \" Clear Cart \");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.cart.items);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"Items (\", ctx_r3.cart.itemCount, \"):\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\u20AC\", ctx_r3.cart.subtotal, \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\\u20AC\", ctx_r3.cart.subtotal, \"\");\n  }\n}\n\nexport let CartComponent = /*#__PURE__*/(() => {\n  class CartComponent {\n    constructor(cartService, router) {\n      this.cartService = cartService;\n      this.router = router;\n      this.cart = null;\n      this.loading = true;\n      this.error = false;\n    }\n\n    ngOnInit() {\n      this.loadCart();\n    }\n\n    loadCart() {\n      this.loading = true;\n      this.error = false;\n      this.cartService.getCart().subscribe(cart => {\n        this.cart = cart;\n        this.loading = false;\n      }, error => {\n        console.error('Error loading cart:', error);\n        this.loading = false;\n        this.error = true;\n      });\n    }\n\n    updateQuantity(item, event) {\n      let newQuantity;\n\n      if (typeof event === 'number') {\n        newQuantity = event;\n      } else {\n        // Handle the event object and safely extract the value\n        const input = event.target;\n        newQuantity = parseInt(input.value, 10);\n      }\n\n      if (newQuantity < 1) {\n        return;\n      }\n\n      if (newQuantity === item.quantity) {\n        return;\n      }\n\n      this.cartService.updateQuantity(item.id, newQuantity).subscribe(updatedItem => {\n        this.loadCart();\n      }, error => {\n        console.error('Error updating quantity:', error);\n      });\n    }\n\n    removeItem(itemId) {\n      this.cartService.removeItem(itemId).subscribe(() => {\n        this.loadCart();\n      }, error => {\n        console.error('Error removing item:', error);\n      });\n    }\n\n    clearCart() {\n      if (confirm('Are you sure you want to clear your cart?')) {\n        this.cartService.clearCart().subscribe(() => {\n          this.loadCart();\n        }, error => {\n          console.error('Error clearing cart:', error);\n        });\n      }\n    }\n\n    incrementQuantity(item) {\n      this.updateQuantity(item, item.quantity + 1);\n    }\n\n    decrementQuantity(item) {\n      if (item.quantity > 1) {\n        this.updateQuantity(item, item.quantity - 1);\n      }\n    }\n\n    proceedToCheckout() {\n      this.router.navigate(['/order']);\n    }\n\n  }\n\n  CartComponent.ɵfac = function CartComponent_Factory(t) {\n    return new (t || CartComponent)(i0.ɵɵdirectiveInject(i1.CartService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n\n  CartComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CartComponent,\n    selectors: [[\"app-cart\"]],\n    decls: 7,\n    vars: 4,\n    consts: [[1, \"cart-container\"], [1, \"page-title\"], [\"class\", \"loading-container\", 4, \"ngIf\"], [\"class\", \"error-message\", 4, \"ngIf\"], [\"class\", \"empty-cart\", 4, \"ngIf\"], [\"class\", \"cart-content\", 4, \"ngIf\"], [1, \"loading-container\"], [1, \"loading-spinner\"], [1, \"spinner\"], [1, \"error-message\"], [1, \"btn-primary\", 3, \"click\"], [1, \"empty-cart\"], [\"routerLink\", \"/books\", 1, \"btn-primary\"], [1, \"cart-content\"], [1, \"cart-items\"], [\"class\", \"cart-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"cart-summary\"], [1, \"summary-row\"], [1, \"summary-row\", \"total\"], [1, \"cart-actions\"], [1, \"btn-primary\", \"checkout-btn\", 3, \"click\"], [1, \"btn-secondary\", 3, \"click\"], [1, \"cart-item\"], [1, \"item-image\"], [3, \"src\", \"alt\"], [1, \"item-details\"], [1, \"item-title\"], [1, \"item-author\"], [1, \"item-price\"], [1, \"item-quantity\"], [1, \"quantity-btn\", 3, \"disabled\", \"click\"], [\"type\", \"number\", \"min\", \"1\", 3, \"value\", \"change\"], [1, \"quantity-btn\", 3, \"click\"], [1, \"item-subtotal\"], [1, \"item-actions\"], [1, \"btn-remove\", 3, \"click\"]],\n    template: function CartComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\", 1);\n        i0.ɵɵtext(2, \"Shopping Cart\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, CartComponent_div_3_Template, 5, 0, \"div\", 2);\n        i0.ɵɵtemplate(4, CartComponent_div_4_Template, 5, 0, \"div\", 3);\n        i0.ɵɵtemplate(5, CartComponent_div_5_Template, 5, 0, \"div\", 4);\n        i0.ɵɵtemplate(6, CartComponent_div_6_Template, 21, 4, \"div\", 5);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.error);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.loading && !ctx.error && (!ctx.cart || ctx.cart.items.length === 0));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.loading && !ctx.error && ctx.cart && ctx.cart.items.length > 0);\n      }\n    },\n    directives: [i3.NgIf, i2.RouterLinkWithHref, i3.NgForOf],\n    styles: [\".cart-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.page-title[_ngcontent-%COMP%]{color:#333;margin-bottom:30px;font-size:2rem;text-align:center}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:300px}.loading-spinner[_ngcontent-%COMP%]{text-align:center}.spinner[_ngcontent-%COMP%]{display:inline-block;width:40px;height:40px;border:4px solid rgba(0,0,0,.1);border-radius:50%;border-top-color:#1976d2;animation:spin 1s ease-in-out infinite}@keyframes spin{to{transform:rotate(360deg)}}.error-message[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828;padding:20px;border-radius:5px;text-align:center;margin:20px 0}.empty-cart[_ngcontent-%COMP%]{text-align:center;padding:40px 0;background-color:#f9f9f9;border-radius:5px;margin:20px 0}.cart-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}@media (min-width: 768px){.cart-content[_ngcontent-%COMP%]{flex-direction:row}.cart-items[_ngcontent-%COMP%]{flex:3}.cart-summary[_ngcontent-%COMP%]{flex:1}}.cart-items[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px;box-shadow:0 2px 5px #0000001a;overflow:hidden}.cart-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px auto 120px 100px 80px;grid-gap:10px;gap:10px;padding:15px;border-bottom:1px solid #eee;align-items:center}.cart-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70px;height:100px;object-fit:cover;border-radius:3px}.item-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.item-title[_ngcontent-%COMP%]{font-size:1rem;margin:0;color:#333}.item-author[_ngcontent-%COMP%]{font-size:.9rem;color:#666;margin:0}.item-price[_ngcontent-%COMP%]{font-weight:700;color:#1976d2;margin:0}.item-quantity[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.quantity-btn[_ngcontent-%COMP%]{width:30px;height:30px;background-color:#f1f1f1;border:none;border-radius:3px;cursor:pointer;font-size:1.2rem;display:flex;align-items:center;justify-content:center}.quantity-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.item-quantity[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px;height:30px;text-align:center;border:1px solid #ddd;border-radius:3px}.item-subtotal[_ngcontent-%COMP%]{font-weight:700;color:#333}.btn-remove[_ngcontent-%COMP%]{background-color:transparent;color:#e53935;border:none;cursor:pointer;padding:5px;font-size:.9rem;display:flex;align-items:center;gap:5px}.btn-remove[_ngcontent-%COMP%]:hover{text-decoration:underline}.cart-summary[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px;box-shadow:0 2px 5px #0000001a;padding:20px;height:fit-content}.cart-summary[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{border-bottom:1px solid #eee;padding-bottom:10px;margin-top:0}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:10px 0}.summary-row.total[_ngcontent-%COMP%]{font-weight:700;font-size:1.2rem;border-top:1px solid #eee;padding-top:10px;margin-top:10px}.cart-actions[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-direction:column;gap:10px}.btn-primary[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff;border:none;padding:10px 15px;border-radius:5px;cursor:pointer;font-weight:700;text-align:center;display:inline-block;text-decoration:none}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#1565c0}.btn-secondary[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#333;border:1px solid #ddd;padding:10px 15px;border-radius:5px;cursor:pointer;font-weight:400;text-align:center}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.checkout-btn[_ngcontent-%COMP%]{font-size:1.1rem;padding:12px 15px}\"]\n  });\n  return CartComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}